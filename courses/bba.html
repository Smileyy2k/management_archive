<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Management Archive</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Anton&display=swap" >
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="../style.css">
    <script src="../script.js" defer></script>
</head>

<body data-program="BBA">
    <!--BACKGROUND-->
    <canvas id="floatingCanvas"></canvas>
    <div id="content">
    <!--THEME BUTTON-->  
    <button id="theme-switch">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z"/></svg>
    </button>
    <!--NAVIGATION BAR-->
    <nav>
        <ul class="sidebar">
            <li onclick="hideSidebar()"><a href="#"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></a></li>
            <li><a href="courses.html">Courses</a></li>
            <li><a href="../wip.html">Case Studies</a></li>
            <li><a href="../wip.html">Attendance</a></li>
            <li><a href="../download_pdf/downloads.html">Downloads</a></li>
        </ul>
        <ul>
            <li><a href="../index.html"><h4>Management ARCHIVE</h4></a></li>
            <li class="hideOnMobile"><a href="courses.html">Courses</a></li>
            <li class="hideOnMobile"><a href="../wip.html">Case Studies</a></li>
            <li class="hideOnMobile"><a href="../wip.html">Attendance</a></li>
            <li class="hideOnMobile"><a href="../download_pdf/downloads.html">Downloads</a></li>
            <li class="menu-button" onclick="showSidebar()"><a href="#"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/></svg></a></li>
        </ul>
    </nav>
    <!--Courses Page-->
    <main class="course-container">
    <div class="card">
        <h2>BBA</h2>
        <div class="selector-group">
            <div class="selector-item">
                <label class="selector-label" for="semester-select">Semester</label>
                <select id="semester-select" class="selector-input">
                    <option value="">Choose Semester</option>
                </select>
            </div>
            
            <div class="selector-item">
                <label class="selector-label" for="subject-select">Subject</label>
                <select id="subject-select" class="selector-input" disabled>
                    <option value="">Select Semester First</option>
                </select>
            </div>
            
            <div class="selector-item">
                <label class="selector-label" for="unit-select">Unit</label>
                <select id="unit-select" class="selector-input" disabled>
                    <option value="">Select Subject First</option>
                </select>
            </div>
        </div>
        <div id="course-content"></div>
        <!-- Download Button -->
        <button id="download-btn" class="download-button" style="display: none;">
            <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor">
            <path d="M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z"/>
            </svg>Download PDF
        </button>
    </div>
     <!-- iframe -->
            <div class="course-content-wrapper">
                <div class="card course-content-card">
                    <div class="iframe-container">
                        <iframe 
                        id="course-iframe"
                        class="course-iframe"
                        src=""
                        title=""
                        onload="this.style.height = (this.contentWindow.document.documentElement.scrollHeight + 50) + 'px'; syncIframeThemeOnLoad();">
                    </iframe>
                </div>
            </div>
        </div>
    </main>
    <script src="courses.js"></script>
    <script>
        // Download button functionality
        const downloadBtn = document.getElementById('download-btn');
        const courseIframe = document.getElementById('course-iframe');
        
        // Store the current selection for download
        let currentDownloadPath = null;
        
        // Function to update download path (call this from courses.js when content loads)
        window.updateDownloadPath = function(program, semester, subjectKey, filename) {
            currentDownloadPath = `../download_pdf/${program}/${semester}/${subjectKey}/${filename}.pdf`;
            downloadBtn.style.display = 'flex';
        };
        
        // Show/hide download button based on iframe content
        courseIframe.addEventListener('load', function() {
            const iframeSrc = courseIframe.src;
            if (iframeSrc && iframeSrc !== '' && currentDownloadPath) {
                downloadBtn.style.display = 'flex';
            } else if (!iframeSrc || iframeSrc === '') {
                downloadBtn.style.display = 'none';
                currentDownloadPath = null;
            }
        });
        
        // Download functionality
        downloadBtn.addEventListener('click', function() {
            if (currentDownloadPath) {
                // Create a temporary anchor element to trigger download
                const link = document.createElement('a');
                link.href = currentDownloadPath;
                link.download = currentDownloadPath.split('/').pop(); // Extract filename
                link.target = '_blank';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        });
    </script>
</body>

</html>
